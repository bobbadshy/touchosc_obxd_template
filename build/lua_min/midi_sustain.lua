--[[START midi_sustain.lua]]local a=self.parent.parent.children.keys;local b=0;local c=600;function onReceiveMIDI(d,e)if d[2]==66 then if d[3]==127 then self.values.x=1 else self.values.x=0 end end end;function onValueChanged(f)if f=='touch'then if self.values.touch then b=getMillis()return end;if getMillis()-b>c then a:notify('sustain',0)self:setValueField('x',ValueField.DEFAULT,0)self.values.x=0 end;return end;if self.values.x==1 then a:notify('sustain',127)self:setValueField('x',ValueField.DEFAULT,0.5)return end;if self.values.x==0 then if self:getValueField('x',ValueField.LAST)==0.5 then a:notify('sustain',127)self.values.x=1;return end;a:notify('sustain',0)self:setValueField('x',ValueField.DEFAULT,0)end end--[[END midi_sustain.lua]]